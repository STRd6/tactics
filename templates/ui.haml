- ui = this

.ui
  .messages_container
    %pre.messages
      - each @messages, (message) ->
        = message
    .toggle
      = "="
      - on "click", (e) ->
        - $(e.currentTarget).parent().toggleClass("hidden")

  .actions
    - each @actions, (action) ->
      - activeClass = -> "active" if action.active
      - disabledClass = -> "disabled" if action.disabled
      .action(class=activeClass class=disabledClass style="background-image: url(#{action.icon})")
        .costs
          .container
            - cost = action?.ability?.actionCost() || 0
            - cost.times ->
              .cost
        = action.name
        - on "click", ->
          - unless action.disabled
            - action.perform()
            - ui.actionPerformed()
